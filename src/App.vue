<template>
  <div id="app">
    <nav v-if="!isHidden">
      <router-link to="/">
        <div class="box" @click="curBar('home')">
          <svg
            class="icon icon-empty"
            viewBox="0 0 1024 1024"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M1010.347 488.107l-409.6-409.6c-47.787-47.787-129.707-47.787-177.494 0l-409.6 409.6c-17.066 17.066-17.066 44.373 0 61.44s44.374 17.066 61.44 0l6.827-6.827v317.44c0 68.267 58.027 126.293 126.293 126.293h614.4c68.267 0 126.294-58.026 126.294-126.293V542.72l6.826 6.827c6.827 6.826 20.48 13.653 30.72 13.653 10.24 0 20.48-3.413 30.72-13.653 10.24-17.067 10.24-44.374-6.826-61.44zM860.16 860.16c0 23.893-17.067 40.96-40.96 40.96H204.8c-23.893 0-40.96-17.067-40.96-40.96V457.387l317.44-317.44c17.067-17.067 40.96-17.067 58.027 0l317.44 317.44V860.16z m0 0"
            ></path>
            <path
              d="M327.68 563.2c-10.24-20.48-37.547-27.307-58.027-17.067-20.48 10.24-27.306 37.547-17.066 58.027C307.2 706.56 402.773 768 512 768s204.8-61.44 259.413-163.84c10.24-20.48 3.414-47.787-17.066-58.027-20.48-10.24-47.787-3.413-58.027 17.067C655.36 638.293 587.093 682.667 512 682.667S368.64 638.293 327.68 563.2z m0 0"
            ></path>
          </svg>
          <svg
            class="icon icon-fill"
            version="1.1"
            viewBox="0 0 1024 1024"
            xmlns="http://www.w3.org/2000/svg"
            @click="curBar('home')"
          >
            <path
              d="M1010.347 488.107l-409.6-409.6c-47.787-47.787-129.707-47.787-177.494 0l-409.6 409.6c-17.066 17.066-17.066 44.373 0 61.44s37.547 17.066 54.614 0v-6.827 317.44c0 68.267 68.266 129.707 136.533 129.707h614.4c68.267 0 136.533-58.027 136.533-129.707V542.72v6.827c6.827 6.826 17.067 13.653 27.307 13.653s20.48-3.413 27.307-13.653c20.48-17.067 17.066-44.374 0-61.44z m-238.934 112.64C716.8 703.147 621.227 764.587 512 764.587s-204.8-61.44-259.413-163.84c-10.24-20.48-3.414-47.787 17.066-58.027 20.48-10.24 47.787-3.413 58.027 17.067C368.64 634.88 436.907 679.253 512 679.253s143.36-44.373 184.32-119.466c10.24-20.48 37.547-27.307 58.027-17.067 20.48 13.653 27.306 37.547 17.066 58.027z"
              fill="#3f5577"
            ></path>
          </svg>
          <p class="title">首页</p>
        </div>
      </router-link>
      <router-link to="/store">
        <div class="box" @click="curBar('store')">
          <svg
            class="icon icon-empty"
            viewBox="0 0 1024 1024"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M750.858 143.19c10.64 0 21 2.1 30.74 6.302 9.33 4.072 17.89 9.852 25.15 17.202 7.27 7.35 12.97 15.885 16.99 25.47 4.15 9.845 6.24 20.352 6.24 31.117 0 0.917 0 1.837 0.12 2.627l39.3 598.858c-0.13 10.37-2.21 20.49-6.23 29.94-4.02 9.59-9.73 18.12-16.99 25.47-7.26 7.35-15.69 13.13-25.16 17.2-9.73 4.21-20.1 6.3-30.74 6.3L236.857 903.676c-10.635 0-21.012-2.09-30.742-6.3-9.465-4.07-17.9-9.85-25.157-17.2-7.267-7.35-12.972-15.88-16.992-25.47-4.02-9.45-6.095-19.57-6.225-29.94l39.43-598.988c0-0.92 0.13-1.84 0.13-2.627 0-10.767 2.07-21.27 6.225-31.117 4.02-9.582 9.725-18.12 16.99-25.472 7.26-7.352 15.692-13.127 25.16-17.202 9.727-4.195 20.105-6.3 30.737-6.3l474.446 0M513.634 491.154c-60.875 0-118.11-23.997-161.155-67.575-43.045-43.58-66.752-101.515-66.752-163.142 0-0.275 0.003-0.547 0.008-0.82l0 0.15 56.045 0.13c0 0.23 0 0.455-0.003 0.685 0.073 95.865 77.14 173.832 171.857 173.832 94.71 0 171.77-77.952 171.855-173.812-0.005-0.233-0.01-0.435-0.01-0.64l56.05-0.257 0-0.19c0.005 0.335 0.005 0.625 0.005 0.922 0 61.627-23.7 119.562-66.745 163.142C631.738 467.154 574.509 491.154 513.634 491.154zM760.768 85.535 266.489 85.535c-68.26 0-123.572 55.995-123.572 125.097l-41.23 625.476c0 69.11 55.312 125.1 123.572 125.1l576.749 0c68.26 0 123.57-55.99 123.57-125.1l-41.24-625.476C884.338 141.53 829.028 85.535 760.768 85.535L760.768 85.535 760.768 85.535z"
              fill="#3f5577"
            ></path>
          </svg>
          <svg
            class="icon icon-fill"
            viewBox="0 0 1024 1024"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M884.3264 210.6368c0-69.12-55.296-125.0816-123.5456-125.0816L266.496 85.5552c-68.2496 0-123.5968 55.9616-123.5968 125.0816L101.6832 836.096c0 69.12 55.296 125.1328 123.5968 125.1328l576.7168 0c68.2496 0 123.60192-56.0128 123.60192-125.1328L884.3264 210.6368zM746.6496 255.3344c0 61.5936-23.7056 119.552-66.7648 163.1232-43.008 43.5712-100.2496 67.584-161.1264 67.584-60.8768 0-118.1184-24.0128-161.1776-67.584-43.008-43.5712-66.7136-101.5296-66.7136-163.1232l0-0.6656 56.0128 0.1024 0 0.7168c0.1024 95.8464 77.1584 173.824 171.8784 173.824 94.72 0 171.776-77.9776 171.8272-173.824l0-0.6656 56.064-0.256L746.6496 255.3344z"
              fill="#3f5577"
            ></path>
          </svg>
          <p class="title">商店</p>
        </div>
      </router-link>
      <router-link to="/message">
        <div class="box" @click="curBar('message')">
          <svg
            class="icon icon-empty"
            viewBox="0 0 1024 1024"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M924.964959 660.871515h-40.82604l-9.568603-280.679022C874.570316 177.976016 717.326273 0 513.196075 0A370.304937 370.304937 0 0 0 142.572185 367.434356v293.437159H95.68603a95.68603 95.68603 0 0 0-95.68603 95.686031 95.68603 95.68603 0 0 0 95.68603 95.68603h243.680424v2.232674a169.364273 169.364273 0 0 0 339.0475 0v-2.232674H924.964959a95.68603 95.68603 0 0 0 95.68603-95.68603 95.68603 95.68603 0 0 0-95.68603-95.686031z m-310.660645 191.372061a105.573587 105.573587 0 0 1-211.466127 0v-2.232674h210.82822s0.637907 1.913721 0.637907 2.551627zM924.964959 787.177075H95.68603a31.895343 31.895343 0 1 1 0-63.790687h78.781498a31.895343 31.895343 0 0 0 31.895344-31.895343v-312.574365A314.169133 314.169133 0 0 1 446.534808 70.807662C647.475471 25.197321 810.779629 191.37206 810.779629 380.192493l9.568603 280.679022v31.895344a31.895343 31.895343 0 0 0 31.895344 31.895343H924.964959a31.895343 31.895343 0 1 1 0 63.790687z"
              fill="#3f5577"
            ></path>
          </svg>
          <svg
            class="icon icon-fill"
            height="200"
            viewBox="0 0 1024 1024"
            width="200"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M584.533333 853.333333h-149.333333c-29.866667 0-55.466667 34.133333-38.4 64 25.6 38.4 68.266667 64 115.2 64s89.6-25.6 110.933333-64c17.066667-29.866667-4.266667-64-38.4-64zM930.133333 712.533333l-17.066666-21.333333C844.8 601.6 810.666667 494.933333 810.666667 384v-29.866667c0-153.6-110.933333-290.133333-264.533334-307.2C366.933333 25.6 213.333333 166.4 213.333333 341.333333v42.666667c0 110.933333-34.133333 217.6-102.4 307.2l-17.066666 21.333333c-8.533333 8.533333-12.8 25.6-8.533334 34.133334 12.8 38.4 46.933333 64 85.333334 64h682.666666c38.4 0 72.533333-25.6 81.066667-64 4.266667-12.8 0-25.6-4.266667-34.133334z"
              fill="#3f5577"
            ></path>
          </svg>
          <p class="title">消息</p>
        </div>
      </router-link>
      <router-link to="/my">
        <div class="box" @click="curBar('my')">
          <svg
            class="icon icon-empty"
            viewBox="0 0 1024 1024"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M960.053977 1024l-0.938726-7.791427C933.074988 800.883576 732.506765 625.679733 512 625.679733c-220.506765 0-421.074988 175.185068-447.096476 390.52884l-0.938726 7.791427L5.087896 1024l1.051373-9.819075C26.509626 824.31418 159.395695 653.184408 336.814932 588.393532l5.407062-1.990099-4.843827-3.116571c-90.699718-58.332441-144.84544-155.509369-144.84544-259.989586C192.532727 151.078582 341.827729 0 512 0c170.191045 0 319.467273 151.078582 319.467273 323.334825 0 104.461443-54.145723 201.63837-144.84544 259.989586l-4.843827 3.116571 5.407062 1.990099c177.419237 64.809651 310.305306 235.920648 330.675663 425.787393L1018.912104 1024 960.053977 1024zM512 59.646658c-131.515529 0-260.590371 130.614352-260.590371 263.669392 0 138.912691 137.5797 242.717025 260.590371 242.717025 123.010671 0 260.590371-103.78556 260.590371-242.717025C772.590371 190.26101 643.515529 59.646658 512 59.646658z"
              fill="#3f5577"
            ></path>
          </svg>
          <svg
            class="icon icon-fill"
            viewBox="0 0 1024 1024"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M645.594834 529.545557c91.622511-49.13833 152.533565-147.926847 147.926847-260.535519-6.142291-144.855701-123.357682-262.071092-267.701526-268.72524C363.561296-6.881209 230.478319 122.106907 230.478319 281.806478c0 106.978239 59.887339 200.136322 147.926847 247.739079-177.10273 47.602757-316.327998 188.363597-362.395182 366.490043-16.891301 65.005915 32.247029 127.9644 99.300375 127.9644h793.379282c67.053346 0 115.679818-62.958485 99.300375-127.9644-46.067184-178.126445-185.292452-318.375428-362.395182-366.490043z"
              fill="#3f5577"
            ></path>
          </svg>
          <p class="title">我的</p>
        </div>
      </router-link>
    </nav>
    <transition :name="$route.meta.transitionName">
      <router-view></router-view>
    </transition>
  </div>
</template>
<script>
import User from "../public/data/user";
import goods from "../public/data/goods.json";
import ponds from "../public/data/ponds.json";
export default {
  name: "app",
  data() {
    return {};
  },
  computed: {
    // ...mapGetters["isHidden"],
    isHidden() {
      return this.$store.getters.isHidden;
    },
  },
  created() {
    this.setOriginData();
  },
  methods: {
    curBar(page) {
      switch (page) {
        case "home":
          this.showBars = {
            home: true,
            store: false,
            message: false,
            my: false,
          };
          break;
        case "store":
          this.showBars = {
            home: false,
            store: true,
            message: false,
            my: false,
          };
          break;
        case "message":
          this.showBars = {
            home: false,
            store: false,
            message: true,
            my: false,
          };
          break;
        case "my":
          this.showBars = {
            home: false,
            store: false,
            message: false,
            my: true,
          };
          break;
      }
    },
    setOriginData() {
      if (!User.getLocalUserData()) {
        User.setLocalStorageData();
        localStorage.setItem("goods", JSON.stringify(goods.goods));
        localStorage.setItem("ponds", JSON.stringify(ponds.ponds));
      }
    },
  },
};
</script>
<style lang="less" scoped>
.slide-left-enter {
  position: absolute;
  transform: translate(-100vw, 0);
}
.slide-left-enter-active {
  transition: all 0.3s;
}
.slide-left-leave-to {
  position: absolute;
  transform: translate(100vw, 0);
}
.slide-left-leave-active {
  transition: all 0.3s;
}
.slide-right-enter {
  position: absolute;
  transform: translate(100vw, 0);
}
.slide-right-enter-active {
  transition: all 0.3s;
}
.slide-right-leave-to {
  position: absolute;
  transform: translate(-100vw, 0);
}
.slide-right-leave-active {
  transition: all 0.3s;
}
#app {
  user-select: none;
  width: 100%;
  min-height: 100vh;
  position: relative;
  overflow: hidden;
  font-family: Avenir, Helvetica, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  color: #333333;
  background-color: #f7f7f8;
  @media screen and (min-width: 740px) {
    width: 730px;
    margin: 0 auto;
  }

  nav {
    width: 100%;
    height: 0.5rem;
    position: fixed;
    bottom: 0;
    font-size: 0.12rem;
    display: flex;
    box-shadow: 0 -1px 5px rgba(0, 0, 0, 0.2);
    z-index: 32;
    background-color: white;
    @media screen and (min-width: 730px) {
      & {
        width: 730px;
      }
    }

    a {
      flex-grow: 1;
      text-decoration: none;
      color: #333333;
      padding: 0.04rem;

      .box {
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        gap: 0.04rem;

        .icon {
          flex-shrink: 0;
          display: block;
          clear: both;
          width: 0.2rem;
          height: 0.2rem;
        }
        .icon-fill {
          display: none;
        }
        .icon-empty {
          display: block;
        }
        .title {
          font-size: 0.13rem;
        }
      }
      &.router-link-exact-active {
        color: #3f5577;
        font-weight: bold;
        .box {
          .icon-empty {
            display: none;
          }
          .icon-fill {
            display: block;
          }
        }
      }
    }
  }
}
</style>
